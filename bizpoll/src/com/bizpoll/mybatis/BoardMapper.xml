<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.bizpoll.mybatis.BoardMapper.xml">
	<select id="selBoardList" resultType="com.bizpoll.dto.BoardDTO">
		<![CDATA[
			SELECT *
			FROM (SELECT ROWNUM RNUM,
                        a.*
            	FROM (SELECT *
                        FROM board
                        WHERE articleno > 0
                        ORDER BY ref DESC, re_step ASC) a)
						WHERE RNUM BETWEEN 1 AND 10
		]]>
	</select>
	
	<select id="getNewArticleNo" resultType="Integer">
		SELECT max(articleno)
		FROM board
	</select>
	
	<insert id="createBoard" parameterType="com.bizpoll.dto.BoardDTO">
		INSERT INTO board(articleno, subject, content, reg_date, ref, re_step, re_level, fileName, id)
		VALUES(board_seq.nextval, #{subject}, #{content}, sysdate, #{ref}, #{re_step}, #{re_level}, #{fileName}, #{id})
	</insert>
</mapper>